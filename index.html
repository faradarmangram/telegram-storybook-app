<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>استوری‌بوک تعاملی TON تلگرام</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <audio id="background-music" src="music.mp3" loop></audio>
    <div class="music-controls" id="global-music-controls">
        <button id="toggle-music">پخش/توقف موسیقی</button>
        <button id="back-to-library" style="display: none;">« بازگشت به کتابخانه</button>
    </div>
    
    <div id="library-view" class="library-container">
        <h2>📚 کتابخانه استوری‌بوک‌ها</h2>
        <div class="book-grid">
            
            <div class="book-cover" data-book-id="story-1">
                <div class="cover-image">
                    <img src="cover-image-1.jpg" alt="کاور داستان ۱">
                </div>
                <h3>ماجرای کدنویس کوچک</h3>
                <p>داستان اول ما درباره ماجراجویی در دنیای TON و تلگرام.</p>
            </div>

            <div class="book-cover" data-book-id="story-2">
                <div class="cover-image">
                    <img src="cover-image-2.jpg" alt="کاور داستان ۲">
                </div>
                <h3>افسانه‌های بلاکچین</h3>
                <p>داستانی جذاب از ری‌اکشن‌ها و پاداش‌ها.</p>
            </div>

            </div>
    </div>

    <div id="book-view" class="book-container" style="display: none;">
        <div id="story-book" class="story-book">
            
            <div class="page cover" data-page="1">
                <h1>ماجرای کدنویس کوچک</h1>
                <p>توسط کمک‌کدنویس</p>
                <button class="turn-page-btn" data-direction="next">شروع خواندن »</button>
            </div>
            
            <div class="page content" data-page="2">
                <h2>فصل اول</h2>
                <p>در یک شب پرستاره، کدنویس کوچولو مشغول ساختن یک مینی‌اپ بود...</p>
                <img src="image1.jpg" alt="تصویر صفحه ۱" style="max-width: 100%; height: auto; margin-top: 15px;">
                <button class="turn-page-btn" data-direction="prev">« صفحه قبل</button>
                <button class="turn-page-btn" data-direction="next">صفحه بعد »</button>
            </div>
            
            <div class="page content" data-page="3">
                <h2>تعاملات و پاداش‌ها</h2>
                
                <div class="interaction-block">
                    <h3>🎁 پاداش و حمایت بلاکچینی</h3>
                    <button id="connect-wallet">اتصال به کیف پول (TON Connect)</button>
                    <button id="send-reward" disabled>ارسال پاداش (۰.۵ TON)</button>
                    <p>⭐ واکنش‌ها: <span id="reactions-count">0</span> | ❤️ امتیازها: <span id="stars-count">0</span></p>
                </div>

                <div class="interaction-block">
                    <h3>🎤 صدای شما (روایت‌گری)</h3>
                    <button id="record-btn">شروع/توقف رکورد</button>
                    <audio id="playback" controls style="display: none; width: 100%; margin-top: 10px;"></audio>
                </div>

                <div class="interaction-block">
                    <h3>💬 نظر شما</h3>
                    <textarea id="comment-field" placeholder="نظر، سؤال یا پیشنهاد خود را بنویسید..."></textarea>
                    <button id="submit-comment">ارسال نظر</button>
                </div>
                
                <button class="turn-page-btn" data-direction="prev">« صفحه قبل</button>
            </div>
            
        </div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/sdk@2.0.0/dist/tonconnect-sdk.js"></script>
    <script src="script.js"></script>
</body>
</html>
